<!doctype html><html><head><style>body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 100%;
    }

    h1 {
      font-size: 18px;
      margin-bottom: 20px;
      color: #333;
    }

    button {
      background: #18A0FB;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      width: 100%;
      margin-bottom: 20px;
    }

    button:hover {
      background: #0D8DE3;
    }

    .section {
      margin-bottom: 20px;
      padding: 15px;
      background: #F5F5F5;
      border-radius: 6px;
    }

    h2 {
      font-size: 16px;
      margin: 0 0 10px 0;
      font-weight: 600;
    }

    h3 {
      font-size: 14px;
      margin: 15px 0 8px 0;
      font-weight: 600;
    }

    .list-item {
      background: white;
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: 4px;
      font-size: 14px;
    }

    .error {
      color: #FF4D4D;
      padding: 10px;
      background: #FFF5F5;
      border-radius: 6px;
      margin-bottom: 20px;
      display: none;
    }

    .empty-message {
      color: #666;
      font-style: italic;
      font-size: 14px;
    }</style></head><body><div class="container"><h1>Design System Analyzer</h1><button id="analyze">Analyze Selection</button><div id="error" class="error"></div><div id="results"><div class="section"><h2>Components</h2><div id="components"></div></div><div class="section"><h2>Styles</h2><h3>Colors</h3><div id="colors"></div><h3>Text Styles</h3><div id="textStyles"></div><h3>Effects</h3><div id="effects"></div></div><div class="section"><h2>Inconsistencies</h2><div id="inconsistencies"></div></div></div></div><script>document.getElementById('analyze').onclick = () => {
      document.getElementById('error').style.display = 'none';
      document.getElementById('results').style.display = 'none';
      parent.postMessage({ pluginMessage: { type: 'analyze-design-system' } }, '*');
    };

    function createListItem(text) {
      const div = document.createElement('div');
      div.className = 'list-item';
      div.textContent = text;
      return div;
    }

    function showEmptyMessage(container) {
      const div = document.createElement('div');
      div.className = 'empty-message';
      div.textContent = 'None found';
      container.appendChild(div);
    }

    onmessage = (event) => {
      const msg = event.data.pluginMessage;
      
      if (msg.type === 'error') {
        const errorDiv = document.getElementById('error');
        errorDiv.textContent = msg.message;
        errorDiv.style.display = 'block';
        document.getElementById('results').style.display = 'none';
        return;
      }
      
      if (msg.type === 'analysis-results') {
        document.getElementById('error').style.display = 'none';
        document.getElementById('results').style.display = 'block';
        
        const data = msg.data;
        
        // Components
        const componentsDiv = document.getElementById('components');
        componentsDiv.innerHTML = '';
        if (data.components.length > 0) {
          data.components.forEach(component => {
            componentsDiv.appendChild(createListItem(`${component.name} (${component.type})`));
          });
        } else {
          showEmptyMessage(componentsDiv);
        }
        
        // Colors
        const colorsDiv = document.getElementById('colors');
        colorsDiv.innerHTML = '';
        if (data.styles.colors.length > 0) {
          data.styles.colors.forEach(color => {
            colorsDiv.appendChild(createListItem(color));
          });
        } else {
          showEmptyMessage(colorsDiv);
        }
        
        // Text Styles
        const textStylesDiv = document.getElementById('textStyles');
        textStylesDiv.innerHTML = '';
        if (data.styles.textStyles.length > 0) {
          data.styles.textStyles.forEach(style => {
            textStylesDiv.appendChild(createListItem(style));
          });
        } else {
          showEmptyMessage(textStylesDiv);
        }
        
        // Effects
        const effectsDiv = document.getElementById('effects');
        effectsDiv.innerHTML = '';
        if (data.styles.effects.length > 0) {
          data.styles.effects.forEach(effect => {
            effectsDiv.appendChild(createListItem(effect));
          });
        } else {
          showEmptyMessage(effectsDiv);
        }
        
        // Inconsistencies
        const inconsistenciesDiv = document.getElementById('inconsistencies');
        inconsistenciesDiv.innerHTML = '';
        if (data.inconsistencies.length > 0) {
          data.inconsistencies.forEach(inconsistency => {
            inconsistenciesDiv.appendChild(createListItem(inconsistency.message));
          });
        } else {
          showEmptyMessage(inconsistenciesDiv);
        }
      }
    };</script><script defer="defer" src="ui.js"></script></body></html>